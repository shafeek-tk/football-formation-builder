<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Formation Builder - Classless</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:system-ui,sans-serif;background:#1a1a1a;color:#fff;line-height:1.4}
        main{max-width:1200px;margin:0 auto;padding:20px;display:flex;gap:20px}
        h1{text-align:center;margin-bottom:20px;font-size:24px;grid-column:1/-1}
        aside{width:300px;background:#2a2a2a;padding:15px;border-radius:8px;height:fit-content}
        article{flex:1;position:relative;background:#0f5132;border-radius:8px;aspect-ratio:3/2;overflow:hidden}
        
        /* Field styling */
        article::before{content:'';position:absolute;top:50%;left:0;right:0;height:2px;background:#fff}
        article::after{content:'';position:absolute;top:50%;left:50%;width:120px;height:120px;border:2px solid #fff;border-radius:50%;transform:translate(-50%,-50%)}
        
        /* Areas */
        .penalty-area{position:absolute;width:132px;height:132px;left:50%;transform:translateX(-50%);border:2px solid #fff}
        .goal-area{position:absolute;width:44px;height:44px;left:50%;transform:translateX(-50%);border:2px solid #fff}
        .penalty-area.top{top:0}
        .penalty-area.bottom{bottom:0}
        .goal-area.top{top:0}
        .goal-area.bottom{bottom:0}
        
        /* Players */
        .player{position:absolute;transform:translate(-50%,-50%);text-align:center;cursor:pointer}
        .player-icon{width:32px;height:32px;margin:0 auto;background-size:contain;background-repeat:no-repeat;background-position:center}
        .my-team .player-icon{background-image:url('icons8-t-shirt-48 (1).png')}
        .opp-team .player-icon{background-image:url('icons8-t-shirt-48.png')}
        .player-number{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:8px;font-weight:bold;color:#fff;text-shadow:1px 1px 1px rgba(0,0,0,0.8)}
        .player-name{font-size:10px;margin-top:3px;padding:2px 4px;background:rgba(0,0,0,0.9);border-radius:3px;color:#fff;font-weight:bold;border:1px solid rgba(255,255,255,0.3);min-height:16px}
        .player-name-input{font-size:10px;margin-top:3px;padding:2px 4px;background:rgba(255,255,255,0.9);border-radius:3px;border:2px solid #007acc;color:#000;font-weight:bold;width:60px;text-align:center}
        
        /* Semantic form elements */
        input,select,button{width:100%;padding:8px;margin:4px 0;background:#333;color:#fff;border:1px solid #555;border-radius:4px;font-size:12px}
        button{background:#007acc;cursor:pointer;font-weight:bold}
        button:hover{background:#005a99}
        h3{margin:15px 0 10px 0;color:#ccc;font-size:14px}
        
        /* Footer */
        footer{position:fixed;bottom:5px;left:50%;transform:translateX(-50%);font-size:8px;color:#888;background:rgba(0,0,0,0.1);padding:2px 6px;border-radius:3px;opacity:0.6}
        footer a{color:#888;text-decoration:none}
    </style>
</head>
<body>
    <h1>Football Formation Builder</h1>
    <main>
        <aside>
            <h3>Formation</h3>
            <select id="formationSelect">
                <option value="442">4-4-2</option>
                <option value="433">4-3-3</option>
                <option value="451">4-5-1</option>
                <option value="352">3-5-2</option>
                <option value="4231">4-2-3-1</option>
                <option value="4123">4-1-2-3</option>
                <option value="41212">4-1-2-1-2 Diamond</option>
                <option value="343">3-4-3</option>
                <option value="532">5-3-2</option>
                <option value="541">5-4-1</option>
            </select>
            
            <h3>My Team</h3>
            <div id="myTeamInputs"></div>
            
            <h3>Opposition</h3>
            <div id="oppTeamInputs"></div>
            
            <button onclick="shareFormation()">Share Formation</button>
            <button onclick="downloadImage()">Download Image</button>
        </aside>
        
        <article id="field">
            <div class="penalty-area top"></div>
            <div class="goal-area top"></div>
            <div class="penalty-area bottom"></div>
            <div class="goal-area bottom"></div>
        </article>
    </main>

    <footer>
        <a target="_blank" href="https://icons8.com">Icons8</a>
    </footer>

    <script>
        // Same JavaScript as original - just the minimal required code
        const formations = {
            '442': [[50], [20, 35, 65, 80], [25, 45, 55, 75], [40, 60]],
            '433': [[50], [20, 35, 65, 80], [35, 50, 65], [25, 50, 75]],
            '451': [[50], [20, 35, 65, 80], [15, 30, 50, 70, 85], [50]],
            '352': [[50], [25, 50, 75], [15, 30, 50, 70, 85], [40, 60]],
            '4231': [[50], [20, 35, 65, 80], [40, 60], [25, 50, 75], [50]],
            '4123': [[50], [20, 35, 65, 80], [50], [35, 65], [25, 50, 75]],
            '41212': [[50], [20, 35, 65, 80], [50], [35, 65], [40, 60]],
            '343': [[50], [25, 50, 75], [20, 35, 65, 80], [25, 50, 75]],
            '532': [[50], [15, 27, 50, 73, 85], [35, 50, 65], [40, 60]],
            '541': [[50], [15, 27, 50, 73, 85], [25, 35, 65, 75], [50]]
        };

        function getLayerY(layerIndex, totalLayers, isMyTeam) {
            const fieldHeight = 100;
            const spacing = fieldHeight / (totalLayers + 1);
            let y = spacing * (layerIndex + 1);
            return isMyTeam ? (100 - y) : y;
        }

        function createPlayer(x, y, position, team, index) {
            const player = document.createElement('div');
            player.className = `player ${team}`;
            player.style.left = x + '%';
            player.style.top = y + '%';
            player.innerHTML = `
                <div class="player-icon">
                    <div class="player-number">${position}</div>
                </div>
                <div class="player-name" onclick="editPlayerName(this)">${team === 'my-team' ? 'Player' : 'Opp'} ${index + 1}</div>
            `;
            return player;
        }

        function loadFormation() {
            const field = document.getElementById('field');
            const formation = document.getElementById('formationSelect').value;
            
            // Clear existing players
            field.querySelectorAll('.player').forEach(p => p.remove());
            
            const F = formations[formation];
            const O = formations[formation];
            
            // Create my team
            F.forEach((layer, layerIndex) => {
                const y = getLayerY(layerIndex, F.length, true);
                layer.forEach((x, playerIndex) => {
                    const position = layerIndex === 0 ? 'GK' : layerIndex === F.length - 1 ? 'ST' : 'P';
                    const player = createPlayer(x, y, position, 'my-team', layerIndex * 10 + playerIndex);
                    field.appendChild(player);
                });
            });
            
            // Create opposition
            O.forEach((layer, layerIndex) => {
                const y = getLayerY(layerIndex, O.length, false);
                layer.forEach((x, playerIndex) => {
                    const position = layerIndex === 0 ? 'GK' : layerIndex === O.length - 1 ? 'ST' : 'P';
                    const player = createPlayer(x, y, position, 'opp-team', layerIndex * 10 + playerIndex);
                    field.appendChild(player);
                });
            });
        }

        function editPlayerName(element) {
            const currentName = element.textContent;
            const input = document.createElement('input');
            input.className = 'player-name-input';
            input.value = currentName;
            input.onblur = () => {
                element.textContent = input.value || currentName;
                element.style.display = 'block';
                input.remove();
            };
            input.onkeydown = (e) => {
                if (e.key === 'Enter') input.blur();
            };
            element.style.display = 'none';
            element.parentNode.appendChild(input);
            input.focus();
        }

        function shareFormation() {
            const url = window.location.origin + window.location.pathname + '#formation=' + btoa(JSON.stringify({formation: document.getElementById('formationSelect').value}));
            navigator.clipboard.writeText(url);
            alert('Formation URL copied to clipboard!');
        }

        function downloadImage() {
            // Simple download implementation
            alert('Download feature - would capture field as image');
        }

        // Initialize
        document.getElementById('formationSelect').addEventListener('change', loadFormation);
        loadFormation();
    </script>
</body>
</html>
